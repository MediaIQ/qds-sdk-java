<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="qds-sdk-java : A Java library that provides the tools you need to authenticate with, and use the Qubole Data Service API.">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>qds-sdk-java</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/qubole/qds-sdk-java">View on GitHub</a>

          <h1 id="project_title">qds-sdk-java</h1>
          <h2 id="project_tagline">A Java library that provides the tools you need to authenticate with, and use the Qubole Data Service API.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/qubole/qds-sdk-java/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/qubole/qds-sdk-java/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h2>
<a id="qubole-data-service-java-sdk" class="anchor" href="#qubole-data-service-java-sdk" aria-hidden="true"><span class="octicon octicon-link"></span></a>Qubole Data Service Java SDK</h2>

<p>A Java library that provides the tools you need to authenticate with, and use the Qubole Data Service API.</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>Currently, you will need to download and build from source:</p>

<ul>
<li>Either:

<ul>
<li>Clone the project: git clone <a href="mailto:git@github.com">git@github.com</a>:qubole/qds-sdk-java.git </li>
<li>Or download one of the releases from <a href="https://github.com/qubole/qds-sdk-java/releases">https://github.com/qubole/qds-sdk-java/releases</a>
</li>
</ul>
</li>
<li>cd to the directory</li>
<li>mvn install</li>
<li>NOTE: see the bullet below regarding Jersery 2.0</li>
</ul>

<p>Then, in your Java application, using Maven, add a dependency:</p>

<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;com.qubole.qds-sdk-java&lt;/groupId&gt;
    &lt;artifactId&gt;qds-sdk-java&lt;/artifactId&gt;
    &lt;version&gt;THE-VERSION&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>In your application initialization code, allocate a QdsClient object:</p>

<pre><code>QdsConfiguration configuration = new DefaultQdsConfiguration(YOUR_API_KEY);
QdsClient client = QdsClientFactory.newClient(configuration);
</code></pre>

<p>Then, make api calls as needed. E.g.</p>

<pre><code>Future&lt;CommandResponse&gt; hiveCommandResponseFuture = client
    .command()
    .hive()
    .query("show tables;")
    .invoke();
CommandResponse hiveCommandResponse = hiveCommandResponseFuture.get();
...
</code></pre>

<p>Alternatively, you can use Jersey's callback mechanism. E.g.</p>

<pre><code>InvocationCallback&lt;CommandResponse&gt; callback = new InvocationCallback&lt;CommandResponse&gt;()
{
    @Override
    public void completed(CommandResponse clusterItems)
    {
        // ...
    }

    @Override
    public void failed(Throwable throwable)
    {
        // ...
    }
};
client.command()
    .hive()
    .query("show tables;")
    .withCallback(callback)
    .invoke();
...
</code></pre>

<p>As part of your application's shutdown, close the client:</p>

<pre><code>client.close();
</code></pre>

<h2>
<a id="waiting-for-results" class="anchor" href="#waiting-for-results" aria-hidden="true"><span class="octicon octicon-link"></span></a>Waiting for Results</h2>

<p>Important: when you submit a command/query, it can take time for it to execute. You cannot get the result until it is ready.
A utility is provided that polls the command and waits for the results: ResultLatch. You can use it to block in the foreground
or using a callback.</p>

<p>Blocking:</p>

<pre><code>ResultLatch latch = new ResultLatch(client, queryId);
ResultValue = latch.awaitResult();
</code></pre>

<p>With callback:</p>

<pre><code>ResultLatch.Callback callback = new ResultLatch.Callback()
{
    @Override
    public void result(String queryId, ResultValue resultValue)
    {
        // use results
    }

    @Override
    public void error(String queryId, Exception e)
    {
        // handle error
    }
};
ResultLatch latch = new ResultLatch(client, queryId);
latch.callback(callback);
</code></pre>

<h2>
<a id="streaming-results" class="anchor" href="#streaming-results" aria-hidden="true"><span class="octicon octicon-link"></span></a>Streaming Results</h2>

<p>Some Qubole APIs write large result sets to S3. If you would like to stream those results, use ResultStreamer.
E.g.</p>

<pre><code>ResultStreamer streamer = new ResultStreamer(client);  // save this until the end of your application

...

Future&lt;ResultValue&gt; results = client.command().results(id)...invoke();
Reader in = streamer.getResults(results.get());
</code></pre>

<p>As part of your application's shutdown, close the client:</p>

<pre><code>streamer.close();
</code></pre>

<h2>
<a id="paging" class="anchor" href="#paging" aria-hidden="true"><span class="octicon octicon-link"></span></a>Paging</h2>

<p>Some of the APIs support paging. These APIs have the "forPage" method. E.g.</p>

<pre><code>// return page 2 using 3 per page
client.command().history().forPage(2, 3).invoke();
</code></pre>

<h2>
<a id="apis" class="anchor" href="#apis" aria-hidden="true"><span class="octicon octicon-link"></span></a>APIs</h2>

<p>Using the QdsClient, you can access any of the Qubole APIs:</p>

<table>
<thead>
<tr>
<th>API</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="http://www.qubole.com/documentation/en/latest/rest-api/reports_api/index.html">Reports</a></td>
<td>client.report().allCommandsReport().start_date(...).end_date(...).limit(...).invoke();</td>
</tr>
<tr>
<td><a href="http://www.qubole.com/documentation/en/latest/rest-api/scheduler_api/index.html">Scheduler</a></td>
<td>client.scheduler().list().invoke();</td>
</tr>
<tr>
<td><a href="http://www.qubole.com/documentation/en/latest/rest-api/dbtap_api/index.html">DbTaps</a></td>
<td>client.dbTaps().list().invoke();</td>
</tr>
<tr>
<td><a href="http://www.qubole.com/documentation/en/latest/rest-api/hive_metadata_api/index.html">Hive Metadata</a></td>
<td>client.hiveMetadata().getTableProperties("table").invoke();</td>
</tr>
<tr>
<td><a href="http://www.qubole.com/documentation/en/latest/rest-api/cluster_api/index.html">Cluster</a></td>
<td>client.cluster().list().invoke();</td>
</tr>
<tr>
<td><a href="http://www.qubole.com/documentation/en/latest/rest-api/command_api/index.html">Command</a></td>
<td>client.command().history().invoke();</td>
</tr>
</tbody>
</table>

<h2>
<a id="jersey-20" class="anchor" href="#jersey-20" aria-hidden="true"><span class="octicon octicon-link"></span></a>Jersey 2.0</h2>

<p>The SDK uses Jersey 2.0. Some widely used open source libraries such as Dropwizard are incompatible with Jersey 2.0.
To workaround this incompatiblity, you can build the SDK using the Maven shade plugin which will hide the SDK's usage
of Jersey 2.0. To build a shaded version of the SDK, execute:</p>

<pre><code>mvn -P shaded install
</code></pre>

<h2>
<a id="javadoc" class="anchor" href="#javadoc" aria-hidden="true"><span class="octicon octicon-link"></span></a>Javadoc</h2>

<p><a href="http://qubole.github.io/qds-sdk-java/apidocs/">http://qubole.github.io/qds-sdk-java/apidocs/</a></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">qds-sdk-java maintained by <a href="https://github.com/qubole">qubole</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
